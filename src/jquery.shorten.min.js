!function(u){u.fn.shorten=function(s){"use strict";var p={showChars:200,minHideChars:100,ellipsesText:"...",moreText:"Read more",lessText:"Show less",onLess:function(){},onMore:function(){},errMsg:null,force:!1};return s&&u.extend(p,s),!(u(this).data("jquery.shorten")&&!p.force)&&(u(this).data("jquery.shorten",!0),u(document).off("click",".morelink"),u(document).on({click:function(){var s=u(this);return s.hasClass("less")?(s=u(this).parents(".allcontent")).animate({height:"0%"},function(){s.prev().show()}).hide("fast",function(){p.onLess()}):(s=u(this).parents(".shortcontent")).next().animate({height:"100%"},function(){s.hide()}).show("fast",function(){p.onMore()}),!1}},".morelink"),this.each(function(){var s=u(this),e=s.html();if(s.text().length>p.showChars+p.minHideChars){var t=e.substr(0,p.showChars);if(0<=t.indexOf("<")){for(var n=!1,a="",i=0,o=[],r=null,h=0,l=0;l<=p.showChars;h++)if("<"!=e[h]||n||(n=!0,"/"==(r=e.substring(h+1,e.indexOf(">",h)))[0]?r!="/"+o[0]?p.errMsg="ERROR in HTML: the top of the stack should be the tag that closes":o.shift():"br"!=r.toLowerCase()&&o.unshift(r)),n&&">"==e[h]&&(n=!1),n)a+=e.charAt(h);else if(l++,i<=p.showChars)a+=e.charAt(h),i++;else if(0<o.length){for(var c=0;c<o.length;c++)a+="</"+o[c]+">";break}t=u("<div/>").html(a+'<span class="ellip">'+p.ellipsesText+'</span><span><a href="javascript://nop/" class="morelink ">'+p.moreText+"</a></span>").html()}else t+='<span class="ellip">'+p.ellipsesText+'</span><span><a href="javascript://nop/" class="morelink ">'+p.moreText+"</a></span>";var f='<div class="shortcontent">'+t+'</div><div class="allcontent">'+e+'<div><a href="javascript://nop/" class="morelink less">'+p.lessText+"</a></div></div>";s.html(f),s.find(".allcontent").hide(),u(".shortcontent p:last",s).css("margin-bottom",0)}}))}}(jQuery);